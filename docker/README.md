# This script is to bulid rust-verification-tool(klee only) image
Test passed on ubuntu18.04, docker19.03, 2020,10,9.
The final size of built images is about 12GB.
( First you should make sure your docker doesn't need `sudo` privilege. To determine that you could try execute `docker ps -a` without `sudo`)
### build rust_verification
`./build` will automatically build images.  
Detailly, `./build` will build three images successively, which are `rust_compiler_dev`, `rust_klee`, `rust_verification`. The last one is what we need.
### run rust_verification
`./run` will start the container(the container will be automatically removed when you exit from it. If you don't need this atomatic removal,  remove `--rm` flag in `rust_verification/run` script)  
To replay the result of `try-klee` in container, execute:  
+ `cd $HOME/rust-verification-tools/try_klee` (the crate and some pre-written scripts are placed here)
+ `./cargo_build` (build the crate)
+ `./run_klee` (symbolically execute the .bc file with klee)
+ `./klee_test` (analyse the klee result)  
+ `./replay_input_values` (replay the result using input values generated by klee. This script now will fail due to link error)
### build stevenjiang1110/ubuntu-expect manually
This step is not necessary if you follow the `build rust_verification` step above, as in the `build` script, one pre-built image will be pulled from docker hub.  
However, if you want to know how to build this image manually, you can follow the steps below.  
Some scripts are interactiveï¼Œso we need a ubuntu image with expect.  
The image can be built as follows:
+ `docker pull ubuntu:18.04`
+ `docker exec -it ubuntu:18.04`
+ execute `apt update && apt upgrade && apt install expect -y` in this container
+ choose district and time zone according to your own situation.(This is why I prepare this image)
+ execute `exit` in container to exit
+ `docker ps -a` to see the CONTAINER_ID just modified
+ then use the CONTAINER_ID: `docker commit CONTAINER_ID stevenjiang1110/ubuntu-expect:latest`
